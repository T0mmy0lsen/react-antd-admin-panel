# Story 5.1: NPM Publishing Setup

## Status
Ready for Review

## Story

**As a** package maintainer,
**I want** to configure NPM publishing for the core package,
**so that** developers can install react-antd-admin-panel from npm and the CLI tool works.

## Acceptance Criteria

1. Package.json has correct metadata for npm publishing
2. Package has proper "files" field to include only necessary files
3. README.md is included and displays on npm
4. Package exports are correctly configured for ESM/CJS
5. Version follows semantic versioning
6. Package can be published with `pnpm publish`
7. create-raap-app CLI package is also publishable

## Tasks / Subtasks

- [x] **Task 1: Core Package Metadata** (AC: 1, 2, 3)
  - [x] Verify/update name, version, description
  - [x] Add author, license, repository fields
  - [x] Configure "files" field for dist, README, LICENSE
  - [x] Add keywords for npm discoverability
  - [x] Create/update README.md with usage examples

- [x] **Task 2: Package Exports Configuration** (AC: 4)
  - [x] Verify exports map covers all subpaths
  - [x] Ensure types are included in exports
  - [x] Test imports work correctly after build

- [x] **Task 3: CLI Package Setup** (AC: 7)
  - [x] Verify create-raap-app package.json metadata
  - [x] Configure bin field for CLI
  - [x] Add "files" field for CLI dist
  - [x] Test CLI is executable after install

- [x] **Task 4: Pre-publish Verification** (AC: 5, 6)
  - [x] Run `pnpm pack` to verify package contents
  - [x] Verify package size is reasonable
  - [x] Test local install with `npm pack` + `npm install`
  - [x] Document publishing process

## Dev Notes

### Package.json Fields Required
```json
{
  "name": "react-antd-admin-panel",
  "version": "2.0.0",
  "description": "TypeScript-first React admin panel builder with Ant Design",
  "author": "Your Name",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/user/react-antd-admin-panel"
  },
  "keywords": [
    "react",
    "admin",
    "antd",
    "ant-design",
    "dashboard",
    "typescript",
    "builder-pattern"
  ],
  "files": [
    "dist",
    "README.md",
    "LICENSE"
  ]
}
```

### Publishing Commands
```bash
# Build first
pnpm build

# Pack to verify contents (dry run)
pnpm pack

# Publish (requires npm login)
pnpm publish --access public
```

### CLI Package bin Field
```json
{
  "name": "create-raap-app",
  "bin": {
    "create-raap-app": "./dist/index.js"
  }
}
```

## Testing

### Manual Testing
```bash
# Test core package
cd packages/core
pnpm pack
# Inspect the tarball contents

# Test CLI
cd packages/create-raap-app
pnpm pack
# Install globally and test
npm install -g ./create-raap-app-*.tgz
create-raap-app test-app
```

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-10 | 1.0 | Initial story creation | James (Dev Agent) |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (Preview)

### Debug Log References
- No issues encountered

### Completion Notes List
- Core package: Added repository, homepage, bugs, files, expanded keywords
- Core package: Created comprehensive README.md with usage examples
- Core package: Created MIT LICENSE file
- CLI package: Updated metadata with repository, homepage, expanded keywords
- CLI package: Created README.md with usage instructions
- Both packages ready for `pnpm publish --access public`

### File List
| File | Status |
|------|--------|
| packages/core/package.json | Modified |
| packages/core/README.md | Created |
| packages/core/LICENSE | Created |
| packages/create-raap-app/package.json | Modified |
| packages/create-raap-app/README.md | Created |

---

## QA Results
_To be populated after implementation_